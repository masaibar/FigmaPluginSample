<h2>Text Replacer</h2>
<!--<button id="rewrite">Rewrite</button>-->
<input id="input" type="file" accept=".csv">
<script>

    // document.getElementById('create').onclick = () => {
    //   const textbox = document.getElementById('count');
    //   const count = parseInt(textbox.value, 10);
    //   parent.postMessage({ pluginMessage: { type: 'create-rectangles', count } }, '*')
    // }

    // document.getElementById('cancel').onclick = () => {
    //     parent.postMessage({pluginMessage: {type: 'cancel'}}, '*')
    // }

    // document.getElementById('rewrite').onclick = () => {
    //     parent.postMessage({pluginMessage: {type: 'rewrite'}}, '*')
    // }

    const input = document.getElementById("input")

    input.onchange = (event) => {
        const fileData = event.target["files"][0]
        const fileReader = new FileReader()
        fileReader.readAsText(fileData)
        fileReader.onload = () => {
            const lines = fileReader.result.split("\n")
            parent.postMessage({pluginMessage: {type: 'csv', lines}}, '*')

            // lines.forEach(line => {
            //     // console.log(line)
            //     parent.postMessage({pluginMessage: {type: 'csv', line}}, '*')
            // })
        }
    }
</script>
